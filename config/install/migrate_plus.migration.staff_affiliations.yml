langcode: en
status: true
dependencies: {}
id: staff_affiliations
class: null
field_plugin_method: null
migration_tags: csv
migration_group: academy
label: "Migrating staff affiliations from CSV file"

source:
  track_changes: true
  plugin: csv
  path: "public://migrations/staff.csv"
  delimiter: ","
  enclosure: '"'
  header_row_count: 1
  ids: [id]

process:
  field_affil_type:
    - plugin: default_value
      default_value: Staff
    - plugin: entity_lookup
      ignore_case: true
      value_key: name
      entity_type: taxonomy_term
      bundle_key: vid
      bundle: affiliation_types

  field_role:
    source: role
    plugin: entity_lookup
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: roles
    value_key: name
    ignore_case: true

  field_department:
    source: department
    plugin: entity_lookup
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: departments
    value_key: name
    ignore_case: true

  uid:
    - plugin: default_value
      default_value: 19

destination:
  plugin: "entity_reference_revisions:paragraph"
  default_bundle: affiliation

migration_dependencies: null
